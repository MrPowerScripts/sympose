"use strict";function addRow(t,e,a){var s=jQuery('tr[data-type="initial"]',t),r=jQuery("tr:last-child",s.closest("tbody")).attr("data-id");"initial"===r&&(r=0);var n=parseInt(r)+1,o=s.clone().attr("data-type",e).attr("data-id",n);jQuery("input, select",o).map((function(t,e){jQuery(e).attr("name",jQuery(e).attr("name").replace("row",n))})),o.appendTo(s.closest("tbody")),!0===a&&jQuery("td:first-child input",o).focus()}function refreshPage(t){var e=new URL(window.location.href);t?(e.searchParams.set("step",t),window.history.pushState({},document.title,e)):t=e.searchParams.get("step"),t&&jQuery("form#sympose-quick-start").attr("data-id",t),updateSchedule(),jQuery("form#sympose-quick-start .block[data-id="+t+"] input:visible").first().focus()}function updateSchedule(){var t,e=jQuery("form#sympose-quick-start input#days"),a=jQuery("form#sympose-quick-start table.schedule[data-type=initial]"),s=e.val();for(0!==s&&s&&void 0!==s||(s=1),t=1;t<=s;t++){if(jQuery("form#sympose-quick-start table.schedule[data-id="+t+"]").length<1){var r=a.clone();r.attr("data-type","clone"),r.attr("data-id",t),jQuery(".title",r).text(jQuery(".title",r).text()+" "+t),jQuery("input, select",r).map((function(e,a){jQuery(a).attr("name",jQuery(a).attr("name").replace("initial",t))})),r.appendTo(a.parent())}}jQuery("form#sympose-quick-start .content .block[data-id=4] select").map((function(t,e){var a=jQuery('tr:not([data-type=initial]) input[name="'+e.dataset.type+'[]"]'),s="";jQuery("option:first-child",e).map((function(t,e){s+='<option value="0">'+e.textContent+"</option>"})),a.map((function(t,e){t++;var a=jQuery(e).val();a&&(s+='<option value="'+t+'">'+a+"</option>")})),jQuery(e).html(s);var r=JSON.parse(e.dataset.selected);r.length>0&&jQuery(e).val(r)}))}console.log("test"),jQuery(document).ready((function(t){refreshPage();var e=t("form#sympose-quick-start");t("form#sympose-quick-start .steps li a").on("click",(function(e){e.preventDefault(),window.history.pushState({},document.title,t(this).attr("href")),refreshPage()})),t("form#sympose-quick-start .footer li").on("click","a",(function(a){a.preventDefault();var s=t("form#sympose-quick-start").attr("data-id");if("next"==t(a.target).parent().data("action"))refreshPage(parseInt(s)+1);else if("prev"==t(a.target).parent().data("action"))s>1&&refreshPage(parseInt(s)-1);else if("submit"==t(a.target).parent().data("action")){var r=new FormData(document.querySelector("form#sympose-quick-start"));t.ajax({url:wpApiSettings.root+"sympose/v1/quick_start_event",method:"POST",processData:!1,contentType:!1,beforeSend:function(){t("form#sympose-quick-start .spinner").addClass("is-active")},data:r,success:function(a){t("form#sympose-quick-start .spinner").removeClass("is-active"),t(".notice",e.parent()).remove(),400===a.status?e.parent().prepend('<div class="notice notice-error is-dismissible"> <p>'+a.message+"</p> </div>"):(e.parent().prepend('<div class="notice notice-success is-dismissible"> <p>'+a.message+"</p> </div>"),t("form#sympose-quick-start table tr[data-type=clone], form#sympose-quick-start table tr[data-type=first]").remove(),t("form#sympose-quick-start .content .block table").map((function(e,a){t("tr[data-type=first]",this).length<1&&addRow(a,"first",!1)})),t("form#sympose-quick-start input").val("")),t(".sympose-setup-wizard > .content").animate({scrollTop:0},400,"swing")},error:function(){}})}})),t("form#sympose-quick-start .content .block table").map((function(e,a){t("tr[data-type=first]",this).length<1&&addRow(a,"first",!1)})),t("form#sympose-quick-start .content").on("click",'.block table a[data-action="add"]',(function(e){e.preventDefault(),addRow(t(this).closest("table"),"clone",!0)})),t("form#sympose-quick-start").on("keyup",(function(e){t(e.target).parents("tr").is(":last-child")&&"9"==e.which&&t(e.target).parents("td").is(":last-child")&&(e.shiftKey||addRow(t(e.target).closest("table"),"clone",!0))})),t("form#sympose-quick-start .content .block table").on("click",'a[data-action="delete"]',(function(e){e.preventDefault(),t(this).closest("tr").remove();var a=new FormData(document.querySelector("form#sympose-quick-start"));a.append("save_data","yes"),t.ajax({url:wpApiSettings.root+"sympose/v1/quick_start_event",method:"POST",processData:!1,contentType:!1,data:a,success:function(t){console.log(t)}})})),t("form#sympose-quick-start").on("change",(function(e){var a=new FormData(document.querySelector("form#sympose-quick-start"));a.append("save_data","yes"),t.ajax({url:wpApiSettings.root+"sympose/v1/quick_start_event",method:"POST",processData:!1,contentType:!1,data:a,success:function(t){}})}))})),document.addEventListener("DOMContentLoaded",(function(){var t=document.querySelector(".sympose-setup-wizard");if(null!==t){resizeSetupWizard(),t.style.display="flex";var e=t.querySelectorAll("ul.buttons li a"),a=t.querySelector(".sympose-setup-wizard-notices");e.forEach((function(e){e.addEventListener("click",(function(s){s.preventDefault();var r=s.target.dataset.action,n={"X-WP-Nonce":wpApiSettings.nonce},o="",i="";"setup-sample-data"===r&&(e.parentNode.querySelector(".spinner").style.display="block",e.parentNode.querySelector(".spinner").classList.add("is-active"),o=wpApiSettings.root+"sympose/v1/generate_sample_data"),"skip-step"===r&&(o=wpApiSettings.root+"sympose/v1/quick_start_event",i={action:r},t.style.display="none"),"quick-start"===r&&(t.querySelector(".wizard-content[data-type=quick-start]").style.display="block",t.querySelector(".wizard-content[data-type=introduction]").style.display="none"),fetch(o,{method:"POST",headers:n,body:JSON.stringify(i)}).then((function(t){return t.json()})).then((function(t){200===t.status&&(null!==e.parentNode.querySelector(".spinner")&&(e.parentNode.querySelector(".spinner").classList.remove("is-active"),e.parentNode.querySelector(".spinner").style.display="none"),a.innerHTML='<div class="notice notice-success is-dismissible"> <p>'+t.message+"</p> </div>")}))}))})),new URL(window.location.href).searchParams.get("step")&&(t.querySelector(".wizard-content[data-type=quick-start]").style.display="block",t.querySelector(".wizard-content[data-type=introduction]").style.display="none")}}));var resizeSetupWizard=function(){var t=document.querySelector(".sympose-setup-wizard"),e=document.querySelector("#wpcontent");null!==t&&(t.style.marginLeft=e.offsetLeft+"px")};window.addEventListener("resize",resizeSetupWizard),function(t){t((function(){t(".sympose-generate-sample-data").on("click","input[type=submit]",(function(e){e.preventDefault();var a=t(this).siblings("span.spinner");t.ajax({url:wpApiSettings.root+"sympose/v1/generate_sample_data",method:"GET",beforeSend:function(t){a.addClass("is-active"),t.setRequestHeader("X-WP-Nonce",wpApiSettings.nonce)}}).done((function(e){400==e.status?t(".wrap h2").after('<div class="notice notice-error is-dismissible"> <p>'+e.message+"</p> </div>"):t(".wrap h2").after('<div class="notice notice-success is-dismissible"> <p>'+e.message+"</p> </div>"),a.removeClass("is-active"),t(this).attr("disabled","disabled")}))}));var e=t(".cmb-row.sortable");e.length>0&&t("ul.cmb2-list",e).sortable()}))}(jQuery);